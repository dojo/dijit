<!DOCTYPE html>
<html lang="en">
<head>
	<title>Editor Test</title>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2"/>

	<script type="text/javascript" src="../boilerplate.js"></script>

	<script type="text/javascript">
		require([
			"doh/runner",
			"dojo/parser",
			"dijit/registry",
			"dijit/tests/helpers",
			"dijit/Editor",
			"dijit/form/Form",
			"dojo/domReady!"
		], function(doh, parser, registry, helpers, Editor){

			doh.register("setup", [
				{
					name: "parse",
					timeout: 5000,
					runTest: function(){
						parser.parse();
						// In some browsers, the editor will not yet be loaded.  Testing that no error occurs
						// when retrieving the value.
						doh.is("", editor.get("value"));
					}
				},
				{
					name: "wait for editors to load",
					timeout: 5000,
					runTest: helpers.waitForLoad
				}
			]);

			doh.register("miscellaneous", [
				{
					name: "set value on unfocused editor",
					timeout: 10000,
					runTest: function(){
						editor.set("value", "hello");
						editor.focus();
						doh.is("hello", editor.editNode.textContent || editor.editNode.innerText);
						doh.is("hello", editor.get("value"));
					}
				},
				{
					name: "initial value of unloaded editor",
					timeout: 10000,
					runTest: function(){
						var tmpEditor = new Editor({});
						doh.t(tmpEditor.get("value") == null);
						doh.f(tmpEditor.isLoaded);
					}
				},
				{
					name: "initial value of unloaded editor",
					timeout: 10000,
					runTest: function(){
						var tmpEditor = new Editor({});
						doh.t(tmpEditor.get("value") == null);
						doh.t(tmpEditor.value == null);
						doh.f(tmpEditor.isLoaded);
						tmpEditor.startup();
						doh.is("", tmpEditor.get("value"));
						doh.is("", tmpEditor.value);
						doh.f(tmpEditor.isLoaded);
					}
				},
				{
					name: "get value of unloaded editor",
					timeout: 10000,
					runTest: function(){
						var tmpEditor = new Editor({ value: "test editor value"});
						doh.is("test editor value", tmpEditor.get("value"));
						doh.is("test editor value", tmpEditor.value);
						doh.f(tmpEditor.isLoaded);
						tmpEditor.startup();
						doh.is("test editor value", tmpEditor.get("value"));
						doh.is("test editor value", tmpEditor.value);
						doh.f(tmpEditor.isLoaded);
					}
				}
			]);

			doh.run();
		});
	</script>
</head>
<body class="claro" role="main">
	<div data-dojo-id="editor" data-dojo-type="dijit/Editor" data-dojo-props='"aria-label":"editor", name:"field"'></div>
</body>
</html>
