<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="content-language" content="ar-sy">
	<title>Dijit I18N Demo</title>

	<script>
		var djConfig = {parseOnLoad: true, isDebug: true},
			locale,
			lang,
			bidi;

		// read in HREF arguments
		if (window.location.href.indexOf("?") > -1) {
			var str = window.location.href.substr(window.location.href.indexOf("?")+1);
			var ary  = str.split(/&/);
			for(var i=0; i<ary.length; i++){
				var split = ary[i].split(/=/),
					key = split[0],
					value = split[1];
				switch(key){
					case "locale":
						djConfig.locale = locale = value;
						lang = locale.replace(/-.*/, "");
						break;
					case "dir":
						document.getElementsByTagName("html")[0].dir = value;
						bidi = value;
						break;
				}
			}
		}		
	</script>
	<style type="text/css">
		@import "../../dojo/resources/dojo.css";
		@import "../themes/tundra/tundra.css";
		@import "../themes/tundra/tundra_rtl.css";
		@import "../tests/css/dijitTests.css";
		@import "i18n/flags.css";
	</style>

	<script type="text/javascript" src="../../dojo/dojo.js"></script>

	<script language="JavaScript" type="text/javascript">
		dojo.require("dojo.data.ItemFileReadStore");
		dojo.require("dijit.Tree");
		dojo.require("dijit._Calendar");
		dojo.require("dijit.form.DateTextBox");
		dojo.require("dijit.form.CurrencyTextBox");
		dojo.require("dijit.form.NumberSpinner");
		dojo.require("dijit.form.ComboBox");
		dojo.require("dijit.Menu");
		dojo.require("dojo.parser");
		dojo.addOnLoad(function(){
			dojo.byId("locale").innerHTML = locale || "default";
			dojo.byId("dir").innerHTML = bidi || "default";
		});
		dojo.require("dojo.currency");
		dojo.require("dojo.date.locale");
	</script>

</head>
<body class="tundra">
	<div dojoType="dojo.data.ItemFileReadStore" jsId="store"
		url="i18n/data.json"></div>

	<h1 class="testTitle">Dijit I18N Demo (locale=<span id="locale"></span>  dir=<span id="dir"></span>   )</h1>

	<table width=100%>
		<tr>
			<td width=30%>
				<div dojoType="dijit.Tree" id="mytree" store="store" query="{type:'language'}" childrenAttr="countries">
					<script type="dojo/method" event="getIconClass" args="item">
						var icon = 
							(store.getValue(item, "type") == "country") ?
							("countryIcon country" + store.getValue(item, "iso") + "Icon") :
							null;
						return icon;
					</script>
					<script type="dojo/method" event="getLabel" args="item">
						var localizedName = lang && store.getValue(item, lang);
						return localizedName || (store.getLabel(item) + " (" + store.getIdentity(item) + ")");
					</script>
					<script type="dojo/method" event="onClick" args="item, node">
						var type = store.getValue(item, "type"),
							newLang = store.getIdentity((type=="country") ? node.getParent().item : item),
							newLocale = (type=="country") ? (newLang + "-" + store.getIdentity(item)) : newLang,
							newDir = (newLang=="ar"||newLang=="he") ? "rtl" : "ltr";
						window.location.href = window.location.href.replace(/\?.*/, "") + "?locale=" + newLocale + "&dir=" + newDir;
					</script>
				</div>
			</td>
			<td style="vertical-align: top;">
				<p>
				Use the tree to select a language or a language/country combo; the page will reload
				in the specified locale.  Note that tree is also rerendered using the specified language for top level tree items.
				Arabic and Hebrew display RTL so be sure to try those.
				</p>
				<input dojoType="dijit._Calendar">

				<p>Some form controls:</p>

				<label for="date">Date:</label>
				<input id="date" dojoType="dijit.form.DateTextBox" value="2006-07-04">
				<label for="spinner">Number spinner:</label>
				<input id="spinner" dojoType="dijit.form.NumberSpinner" value=12345>
				<label for="currency">Currency:</label>
				<input id="currency" type="text" name="income1" value="54775.53"
					dojoType="dijit.form.CurrencyTextBox"
					required="true"
					constraints="{fractional:true}"
					currency="USD"/>USD
				<br>

				<label for="combo1">Simple Combo:</label>
				<select id="combo1" dojoType="dijit.form.ComboBox">
					<option>option #1</option>
					<option>option #2</option>
					<option>option #3</option>
				</select>
				<label for="combo2">Combo on languages and countries:</label>
				<input id="combo2" dojoType="dijit.form.ComboBox"
						value=""
						store="store"
						searchAttr="name"
						name="anything"
				>
			</td>
		</tr>
	</table>



</body>
</html>
